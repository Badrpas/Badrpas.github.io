<!DOCTYPE html>
<html>
<head>
  <title>What's that?</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/dark.css">
  <link rel="stylesheet" href="main.css">
</head>
<body>

  <h1>Well hello there!</h1>
  <span>I've got some projects hosted here:</span>

  <div id="entry-template">
    <div class="entry">
      <a href="{{href}}">{{description}}</a>
    </div>
  </div>

  <script>
    fetch('links.json')
      .then(r => r.json())
      .then(entries => entries.forEach(renderEntry));

    const templateEl = document.getElementById('entry-template');
    const templateRaw = templateEl.innerHTML;

    const template = createTemplate(templateRaw);

    function renderEntry (entry) {
      const html = template({
        href: entry.dir,
        description: entry.description || entry.dir,
      });

      renderHtml(html);
    }

    function createTemplate (src) {
      return (arg = {}) => {
        return Object.entries(arg).reduce((out, [key, value]) => {
          return out.replace(new RegExp(`{{${key}}}`, 'g'), value);
        }, src);
      };
    }
    function renderHtml (html, containerEl = document.body) {
      const tempEl = document.createElement('div');
      tempEl.innerHTML = html;

      containerEl.append(...tempEl.children);
    }
  </script>

</body>
</html>
