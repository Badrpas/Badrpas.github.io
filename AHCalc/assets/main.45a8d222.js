import{$}from"./index.f6e74004.js";const data={buy:0,even:0,post:0,profit:0,multiplier:1},history=[],cacheData=()=>{localStorage.setItem("data",JSON.stringify(data)),localStorage.setItem("history",JSON.stringify(history))},restoreCache=()=>{const t=localStorage.getItem("data");t&&Object.assign(data,JSON.parse(t));const a=localStorage.getItem("history");a&&history.push(...JSON.parse(a))},updateValues=()=>{Object.entries(data).forEach(([a,r])=>{$(`#${a}`).val(r.toFixed(2)).html(r.toFixed(2))});const t=[];for(let a=1;a<history.length;a++)Object.entries(data).every(([o,s])=>history[a][o]===s)&&t.push(a);for(;t.length;){const a=t.pop();console.log("rm",a),history.splice(a,1)}history.push({...data}),renderHistory(),cacheData()};function renderHistory(){$("#history").empty();const t=["buy","even","post","profit","multiplier","totalprofit"];for(const r of history){const o=$("<tr>").html(t.map(n=>{var i;return $("<td>").html(((i=r[n])==null?void 0:i.toFixed(2))||"??")})),s=$("<button>").html("[x]");o.append(s),s.on("click",()=>{const n=history.indexOf(r);history.splice(n,1),cacheData(),renderHistory()}),$("#history").prepend(o)}const a=$("<tr>").html(t.map(r=>$("<th>").html(r)));$("#history").prepend(a)}const readVal=e=>{e instanceof $||(e=$(e));const raw=e.val()||"0";let val=raw.replace(/ÑŽ/g,".");const number=Number(val);if(isNaN(number))try{const evaled=eval(val);return+evaled}catch(t){console.error(t)}return number},updateProfit=()=>{data.profit=data.post*.95-data.buy,data.totalprofit=data.profit*data.multiplier};restoreCache();updateValues();$('[name="calc"] #buy').on("change",t=>{let a=readVal(t.currentTarget);data.buy=a,data.even=a/.95,data.post=data.even*1.05,updateProfit(),updateValues()});$('[name="calc"] #even').on("change",t=>{data.even=readVal(t.currentTarget),data.buy=data.even*.95,data.post=data.even*1.05,updateProfit(),updateValues()});$('[name="calc"] #post').on("change",t=>{data.post=readVal(t.currentTarget),updateProfit(),updateValues()});$('[name="calc"] #multiplier').on("change",t=>{data.multiplier=readVal(t.currentTarget),updateProfit(),updateValues()});
